{% extends "contest/contest.html" %}
{% block three_col_js %}{% endblock %}
{% block middle_content %}
<div class="content-description">
    <h2>{{ _('MCQ Questions') }}</h2>
    
    {% if not can_participate %}
        <div class="alert alert-warning">
            {% if not request.user.is_authenticated %}
                {{ _('You must be logged in to participate in this contest.') }}
            {% elif not contest.started %}
                {{ _('The contest has not started yet.') }}
            {% elif contest.ended %}
                {{ _('The contest has ended.') }}
            {% endif %}
        </div>
    {% endif %}
    
    {% if contest_mcqs %}
        <table class="table striped">
            <thead>
                <tr>
                    <th style="width: 5%">#</th>
                    <th style="width: 45%">{{ _('Question') }}</th>
                    <th style="width: 15%">{{ _('Type') }}</th>
                    <th style="width: 10%">{{ _('Points') }}</th>
                    <th style="width: 15%">{{ _('Difficulty') }}</th>
                    <th style="width: 10%">{{ _('Status') }}</th>
                </tr>
            </thead>
            <tbody>
                {% for contest_mcq in contest_mcqs %}
                    {% set mcq = contest_mcq.mcq_question %}
                    {% set submission = user_submissions.get(mcq.id) %}
                    <tr>
                        <td>{{ contest_mcq.order + 1 }}</td>
                        <td>
                            <a href="{% url 'contest_mcq_detail' contest.key mcq.code %}">
                                {{ mcq.name }}
                            </a>
                        </td>
                        <td>
                            {% if mcq.question_type == 'SINGLE' %}
                                {{ _('Single Choice') }}
                            {% elif mcq.question_type == 'MULTIPLE' %}
                                {{ _('Multiple Choice') }}
                            {% elif mcq.question_type == 'TRUE_FALSE' %}
                                {{ _('True/False') }}
                            {% endif %}
                        </td>
                        <td>{{ contest_mcq.points }}</td>
                        <td>
                            {% if mcq.difficulty == 'E' %}
                                <span class="badge badge-success">{{ _('Easy') }}</span>
                            {% elif mcq.difficulty == 'M' %}
                                <span class="badge badge-warning">{{ _('Medium') }}</span>
                            {% elif mcq.difficulty == 'H' %}
                                <span class="badge badge-danger">{{ _('Hard') }}</span>
                            {% endif %}
                        </td>
                        <td>
                            {% if submission %}
                                {% if submission.is_correct %}
                                    <span class="badge badge-success" title="{{ _('Correct') }}">
                                        ✓ {{ submission.points_earned|floatformat:1 }}/{{ contest_mcq.points }}
                                    </span>
                                {% else %}
                                    <span class="badge badge-danger" title="{{ _('Incorrect') }}">
                                        ✗ {{ submission.points_earned|floatformat:1 }}/{{ contest_mcq.points }}
                                    </span>
                                {% endif %}
                            {% else %}
                                <span class="badge badge-secondary">{{ _('Not attempted') }}</span>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div class="alert alert-info">
            {{ _('No MCQ questions have been added to this contest yet.') }}
        </div>
    {% endif %}
</div>
{% endblock %}
